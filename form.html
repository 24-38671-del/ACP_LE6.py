{% extends "base.html" %}

{% block title %}{{ action }} Record{% endblock %}

{% block content %}
<h1>{{ action }} Record</h1>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
{% endwith %}

{% if action == 'Edit' and record_id %}
    {% set form_action = url_for('main.edit_record', id=record_id) %}
{% else %}
    {% set form_action = url_for('main.create_record') %}
{% endif %}

<form method="POST" action="{{ form_action }}">
    {{ form.hidden_tag() }}
    
    <div>
        {{ form.title.label }}
        {{ form.title(size=50) }}
        {% if form.title.errors %}
            <ul class="errors">
            {% for error in form.title.errors %}
                <li>{{ error }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    </div>
    
    <div>
        {{ form.content.label }}
        {{ form.content(rows=10, cols=50) }}
        {% if form.content.errors %}
            <ul class="errors">
            {% for error in form.content.errors %}
                <li>{{ error }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    </div>
    
    <div>
        {{ form.submit() }}
    </div>
</form>
{% endblock %}